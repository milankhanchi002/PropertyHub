{"ast":null,"code":"import _objectSpread from\"/Users/milankhanchi/PropertyHubFinal/PropertyHub/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useCallback,useRef}from'react';import{Link}from'react-router-dom';import{getVisits,updateVisitStatus,getLeases,getAdminProperties,getOwnerProperties,deleteProperty,toggleProperty,getVisitsByOwner,getVisitsByTenant,updateLeaseStatus,requestVisitReschedule,decideVisitReschedule,tenantUpdateVisitStatus,getVisitMessages,postVisitMessage,getLeaseMessages,postLeaseMessage}from'../api';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export default function Dashboard(){var _user$name,_user$name$charAt;const[activeTab,setActiveTab]=useState('overview');const[visits,setVisits]=useState([]);const[leases,setLeases]=useState([]);const[properties,setProperties]=useState([]);const[loading,setLoading]=useState(true);const[toast,setToast]=useState({visible:false,type:'info',message:''});const[toggling,setToggling]=useState({});// { [propertyId]: true }\nconst[errorMsg,setErrorMsg]=useState('');const loadingRef=useRef(false);const abortRef=useRef(null);const[loaded,setLoaded]=useState({overview:false,visits:false,leases:false,properties:false});const[chatOpen,setChatOpen]=useState(false);const[chatVisit,setChatVisit]=useState(null);const[chatMode,setChatMode]=useState('VISIT');const[chatMessages,setChatMessages]=useState([]);const[chatSending,setChatSending]=useState(false);const[chatInput,setChatInput]=useState('');const[rescheduleOpen,setRescheduleOpen]=useState(false);const[rescheduleVisit,setRescheduleVisit]=useState(null);const[rescheduleInput,setRescheduleInput]=useState('');const[rescheduleSubmitting,setRescheduleSubmitting]=useState(false);const[rescheduleError,setRescheduleError]=useState('');const user=JSON.parse(localStorage.getItem('user')||'null');const formatINR=value=>{if(value===null||value===undefined)return'₹0';try{return new Intl.NumberFormat('en-IN',{style:'currency',currency:'INR',maximumFractionDigits:0}).format(value);}catch(_unused){return\"\\u20B9\".concat(Number(value).toLocaleString('en-IN'));}};async function openVisitChat(visit){setChatMode('VISIT');setChatVisit(visit);setChatOpen(true);try{const msgs=await getVisitMessages(visit.id);setChatMessages(Array.isArray(msgs)?msgs:[]);}catch(err){console.error('Failed to load messages:',err);showToast('error','Failed to load messages');}}async function openLeaseChat(lease){setChatMode('LEASE');setChatVisit({id:lease.id,propertyTitle:lease.propertyTitle});setChatOpen(true);try{const msgs=await getLeaseMessages(lease.id);setChatMessages(Array.isArray(msgs)?msgs:[]);}catch(err){console.error('Failed to load messages:',err);showToast('error','Failed to load messages');}}async function sendChatMessage(){if(!chatVisit||!chatInput.trim())return;setChatSending(true);try{const saved=chatMode==='LEASE'?await postLeaseMessage(chatVisit.id,chatInput.trim()):await postVisitMessage(chatVisit.id,chatInput.trim());setChatMessages(prev=>[...prev,saved]);setChatInput('');}catch(err){console.error('Failed to send message:',err);showToast('error','Failed to send message');}finally{setChatSending(false);}}function openOwnerRescheduleForm(visit){const base=visit.visitDateTime?new Date(visit.visitDateTime):new Date();const pad=n=>\"\".concat(n).padStart(2,'0');const isoLocal=\"\".concat(base.getFullYear(),\"-\").concat(pad(base.getMonth()+1),\"-\").concat(pad(base.getDate()),\"T\").concat(pad(base.getHours()),\":\").concat(pad(base.getMinutes()));setRescheduleVisit(visit);setRescheduleInput(isoLocal);setRescheduleError('');setRescheduleOpen(true);}async function submitOwnerReschedule(e){var _e$preventDefault;e===null||e===void 0?void 0:(_e$preventDefault=e.preventDefault)===null||_e$preventDefault===void 0?void 0:_e$preventDefault.call(e);if(!rescheduleVisit||!rescheduleInput)return;setRescheduleSubmitting(true);setRescheduleError('');try{const updated=await requestVisitReschedule(rescheduleVisit.id,rescheduleInput);setVisits(prev=>prev.map(v=>v.id===rescheduleVisit.id?_objectSpread(_objectSpread({},v),{},{proposedDateTime:updated.proposedDateTime,rescheduleStatus:updated.rescheduleStatus}):v));setRescheduleOpen(false);setRescheduleVisit(null);setRescheduleInput('');showToast('success','Reschedule requested');}catch(err){console.error('Failed to request reschedule:',err);setRescheduleError((err===null||err===void 0?void 0:err.message)||'Failed to request reschedule');}finally{setRescheduleSubmitting(false);}}async function handleTenantRescheduleDecision(visit,decision){try{const updated=await decideVisitReschedule(visit.id,decision);setVisits(prev=>prev.map(v=>v.id===visit.id?_objectSpread(_objectSpread({},v),{},{visitDateTime:updated.visitDateTime,proposedDateTime:updated.proposedDateTime,rescheduleStatus:updated.rescheduleStatus}):v));showToast('success',\"Reschedule \".concat(decision.toLowerCase()));}catch(err){console.error('Failed to submit decision:',err);showToast('error','Failed to submit decision: '+((err===null||err===void 0?void 0:err.message)||'Unknown error'));}}async function handleTenantToggleVisitStatus(visit){const next=visit.status==='PENDING'?'DONE':'PENDING';try{const updated=await tenantUpdateVisitStatus(visit.id,next);setVisits(prev=>prev.map(v=>v.id===visit.id?_objectSpread(_objectSpread({},v),{},{status:updated.status}):v));showToast('success',\"Visit marked as \".concat(next));}catch(err){console.error('Failed to update visit status:',err);showToast('error','Failed to update visit status: '+((err===null||err===void 0?void 0:err.message)||'Unknown error'));}}async function handleLeaseDecision(lease,value){try{const updated=await updateLeaseStatus(lease.id,value);setLeases(prev=>prev.map(l=>l.id===lease.id?_objectSpread(_objectSpread({},l),{},{status:updated.status}):l));showToast('success',\"Lease \".concat(value.toLowerCase(),\" successfully\"));}catch(err){console.error('Failed to update lease status:',err);showToast('error','Failed to update lease: '+((err===null||err===void 0?void 0:err.message)||'Unknown error'));}}async function handleToggleAvailability(property){try{var _updated$available2;const updated=await toggleProperty(property.id);// Optimistically update current list for snappier UI\nsetProperties(prev=>prev.map(p=>{var _updated$available;return p.id===property.id?_objectSpread(_objectSpread({},p),{},{available:(_updated$available=updated===null||updated===void 0?void 0:updated.available)!==null&&_updated$available!==void 0?_updated$available:!p.available}):p;}));if((user===null||user===void 0?void 0:user.role)==='OWNER'||(user===null||user===void 0?void 0:user.role)==='ADMIN'){const propertiesData=await getOwnerOrAdminProperties();setProperties(propertiesData);}const newStatus=(_updated$available2=updated===null||updated===void 0?void 0:updated.available)!==null&&_updated$available2!==void 0?_updated$available2:!property.available;showToast('success',\"Property marked as \".concat(newStatus?'Available':'Occupied'));}catch(err){console.error('Failed to toggle availability:',err);showToast('error','Failed to toggle availability: '+((err===null||err===void 0?void 0:err.message)||'Unknown error'));}}// helper: fetch ONLY properties owned by the signed-in user (even for ADMIN)\nasync function getOwnerOrAdminProperties(){if(!(user!==null&&user!==void 0&&user.id))return[];return await getOwnerProperties(user.id).catch(()=>[]);}const loadTabData=useCallback(async tab=>{if(loadingRef.current)return;// prevent overlapping loads\n// If already loaded once, do not re-fetch automatically\nif(loaded[tab]){setLoading(false);return;}loadingRef.current=true;setLoading(true);setErrorMsg('');// abort previous if any\nif(abortRef.current){try{abortRef.current.abort();}catch(_unused2){}}const controller=new AbortController();abortRef.current=controller;try{if(tab==='visits'){// Role-scoped visits\nlet visitsData=[];if((user===null||user===void 0?void 0:user.role)==='TENANT'){visitsData=await getVisitsByTenant(user.email).catch(()=>[]);}else if((user===null||user===void 0?void 0:user.role)==='OWNER'){visitsData=await getVisitsByOwner(user.id).catch(()=>[]);}else if((user===null||user===void 0?void 0:user.role)==='ADMIN'){visitsData=await getVisits().catch(()=>[]);}setVisits(visitsData||[]);setLoaded(prev=>_objectSpread(_objectSpread({},prev),{},{visits:true}));}else if(tab==='leases'){const leasesData=await getLeases().catch(()=>[]);setLeases(leasesData||[]);setLoaded(prev=>_objectSpread(_objectSpread({},prev),{},{leases:true}));}else if(tab==='properties'){// Load properties for owner/admin only\nconst propertiesData=await getOwnerOrAdminProperties();setProperties(propertiesData||[]);setLoaded(prev=>_objectSpread(_objectSpread({},prev),{},{properties:true}));}else if(tab==='overview'){// Lightweight default: load minimal needed, sequentially to reduce concurrency\nlet v=[];if((user===null||user===void 0?void 0:user.role)==='TENANT')v=await getVisitsByTenant(user.email).catch(()=>[]);else if((user===null||user===void 0?void 0:user.role)==='OWNER')v=await getVisitsByOwner(user.id).catch(()=>[]);else if((user===null||user===void 0?void 0:user.role)==='ADMIN')v=await getVisits().catch(()=>[]);setVisits(v||[]);const l=await getLeases().catch(()=>[]);setLeases(l||[]);if((user===null||user===void 0?void 0:user.role)==='OWNER'||(user===null||user===void 0?void 0:user.role)==='ADMIN'){const propertiesData=await getOwnerOrAdminProperties();setProperties(propertiesData||[]);}setLoaded(prev=>_objectSpread(_objectSpread({},prev),{},{overview:true}));}}catch(err){console.error('Error loading tab data:',err);setErrorMsg((err===null||err===void 0?void 0:err.message)||'Failed to load data');}finally{setLoading(false);loadingRef.current=false;setLoaded(prev=>_objectSpread(_objectSpread({},prev),{},{[tab]:true}));}},[user,loaded]);const initRef=useRef(false);useEffect(()=>{// Prevent StrictMode double-effect on mount\nif(!initRef.current){initRef.current=true;loadTabData(activeTab);return;}// On actual tab changes, load as needed\nloadTabData(activeTab);// Intentionally exclude loadTabData from deps to keep a stable trigger\n// eslint-disable-next-line react-hooks/exhaustive-deps\n},[activeTab]);// Safety net: stop spinner if something keeps pending too long\nuseEffect(()=>{if(!loading)return;const t=setTimeout(()=>{setLoading(false);setErrorMsg(prev=>prev||'Taking longer than usual. Please refresh the page.');},8000);return()=>clearTimeout(t);},[loading]);async function handleToggleVisitStatus(visit){const current=visit.status;const next=current==='PENDING'?'DONE':'PENDING';try{const updated=await updateVisitStatus(visit.id,next);setVisits(prev=>prev.map(v=>v.id===visit.id?_objectSpread(_objectSpread({},v),{},{status:updated.status}):v));showToast('success',\"Visit marked as \".concat(updated.status));}catch(err){console.error('Failed to update visit status:',err);showToast('error','Failed to update visit status: '+((err===null||err===void 0?void 0:err.message)||'Unknown error'));}}async function handleDeleteProperty(id){if(!window.confirm('Are you sure you want to delete this property? This action cannot be undone.'))return;try{// Optimistically update UI first\nsetProperties(prev=>prev.filter(p=>p.id!==id));await deleteProperty(id);// Refresh properties list\nif((user===null||user===void 0?void 0:user.role)==='OWNER'||(user===null||user===void 0?void 0:user.role)==='ADMIN'){const propertiesData=await getOwnerOrAdminProperties().catch(()=>[]);setProperties(propertiesData||[]);}showToast('success','Property deleted successfully');}catch(err){console.error('Failed to delete property:',err);showToast('error','Failed to delete property: '+((err===null||err===void 0?void 0:err.message)||'Unknown error'));}}function showToast(type,message){setToast({visible:true,type,message});// auto-hide after 3 seconds\nsetTimeout(()=>setToast(prev=>_objectSpread(_objectSpread({},prev),{},{visible:false})),3000);}if(!user){return/*#__PURE__*/_jsx(\"div\",{className:\"content\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",style:{padding:'4rem'},children:[/*#__PURE__*/_jsx(\"h2\",{style:{marginBottom:'1rem'},children:\"Please Sign In\"}),/*#__PURE__*/_jsx(\"p\",{style:{color:'#6b7280',marginBottom:'2rem'},children:\"You need to be signed in to access your dashboard.\"}),/*#__PURE__*/_jsx(Link,{to:\"/auth\",className:\"btn\",children:\"Sign In\"})]})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"content\",children:[toast.visible&&/*#__PURE__*/_jsx(\"div\",{style:{position:'fixed',top:'1rem',right:'1rem',zIndex:9999,padding:'0.75rem 1rem',borderRadius:'0.5rem',color:'#fff',background:toast.type==='success'?'#10b981':toast.type==='error'?'#ef4444':'#3b82f6',boxShadow:'0 10px 15px -3px rgba(0,0,0,0.1), 0 4px 6px -4px rgba(0,0,0,0.1)'},role:\"alert\",children:toast.message}),rescheduleOpen&&/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\",onClick:()=>setRescheduleOpen(false),children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center',marginBottom:'1rem'},children:[/*#__PURE__*/_jsx(\"h3\",{style:{fontSize:'1.25rem',fontWeight:700},children:\"Propose New Visit Time\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setRescheduleOpen(false),style:{background:'none',border:'none',fontSize:'1.5rem',cursor:'pointer'},children:\"\\xD7\"})]}),rescheduleError&&/*#__PURE__*/_jsx(\"div\",{style:{background:'#fee2e2',color:'#991b1b',padding:'0.75rem',borderRadius:'0.5rem',marginBottom:'0.75rem',border:'1px solid #fecaca'},children:rescheduleError}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:submitOwnerReschedule,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"New Date & Time\"}),/*#__PURE__*/_jsx(\"input\",{type:\"datetime-local\",value:rescheduleInput,onChange:e=>setRescheduleInput(e.target.value),min:new Date().toISOString().slice(0,16),required:true})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'0.5rem',justifyContent:'flex-end'},children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn-secondary\",onClick:()=>setRescheduleOpen(false),children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:rescheduleSubmitting,children:rescheduleSubmitting?'Submitting…':'Submit'})]})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"sidebar\",children:[/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'2rem'},children:[/*#__PURE__*/_jsx(\"div\",{style:{width:'60px',height:'60px',borderRadius:'50%',background:'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',display:'flex',alignItems:'center',justifyContent:'center',color:'white',fontWeight:'700',fontSize:'1.5rem',margin:'0 auto 1rem'},children:(_user$name=user.name)===null||_user$name===void 0?void 0:(_user$name$charAt=_user$name.charAt(0))===null||_user$name$charAt===void 0?void 0:_user$name$charAt.toUpperCase()}),/*#__PURE__*/_jsx(\"h3\",{style:{textAlign:'center',marginBottom:'0.5rem'},children:user.name}),/*#__PURE__*/_jsx(\"p\",{style:{textAlign:'center',color:'#6b7280',fontSize:'0.875rem'},children:user.role})]}),/*#__PURE__*/_jsxs(\"nav\",{children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setActiveTab('overview'),className:activeTab==='overview'?'active':'',style:{width:'100%',textAlign:'left',background:'none',border:'none',padding:'0.75rem 1rem',borderRadius:'0.5rem',cursor:'pointer',transition:'all 0.3s ease',display:'flex',alignItems:'center',gap:'0.5rem',color:'#4a5568',fontWeight:600},children:[/*#__PURE__*/_jsx(\"span\",{role:\"img\",\"aria-label\":\"overview\",children:\"\\uD83D\\uDCCA\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Overview\"})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setActiveTab('visits'),className:activeTab==='visits'?'active':'',style:{width:'100%',textAlign:'left',background:'none',border:'none',padding:'0.75rem 1rem',borderRadius:'0.5rem',cursor:'pointer',transition:'all 0.3s ease',display:'flex',alignItems:'center',gap:'0.5rem',color:'#4a5568',fontWeight:600},children:[/*#__PURE__*/_jsx(\"span\",{role:\"img\",\"aria-label\":\"visits\",children:\"\\uD83D\\uDCC5\"}),/*#__PURE__*/_jsx(\"span\",{children:\"My Visits\"})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setActiveTab('leases'),className:activeTab==='leases'?'active':'',style:{width:'100%',textAlign:'left',background:'none',border:'none',padding:'0.75rem 1rem',borderRadius:'0.5rem',cursor:'pointer',transition:'all 0.3s ease',display:'flex',alignItems:'center',gap:'0.5rem',color:'#4a5568',fontWeight:600},children:[/*#__PURE__*/_jsx(\"span\",{role:\"img\",\"aria-label\":\"leases\",children:\"\\uD83D\\uDCCB\"}),/*#__PURE__*/_jsx(\"span\",{children:\"My Leases\"})]}),(user.role==='OWNER'||user.role==='ADMIN')&&/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setActiveTab('properties'),className:activeTab==='properties'?'active':'',style:{width:'100%',textAlign:'left',background:'none',border:'none',padding:'0.75rem 1rem',borderRadius:'0.5rem',cursor:'pointer',transition:'all 0.3s ease',display:'flex',alignItems:'center',gap:'0.5rem',color:'#4a5568',fontWeight:600},children:[/*#__PURE__*/_jsx(\"span\",{role:\"img\",\"aria-label\":\"properties\",children:\"\\uD83C\\uDFE0\"}),/*#__PURE__*/_jsx(\"span\",{children:\"My Properties (Owned)\"})]})]})]}),/*#__PURE__*/_jsx(\"div\",{children:loading?/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",style:{padding:'4rem'},children:[/*#__PURE__*/_jsx(\"div\",{className:\"loading\",style:{width:'40px',height:'40px',margin:'0 auto'}}),/*#__PURE__*/_jsx(\"p\",{style:{marginTop:'1rem',color:'#6b7280'},children:\"Loading dashboard...\"}),errorMsg&&/*#__PURE__*/_jsx(\"p\",{style:{marginTop:'0.5rem',color:'#ef4444'},children:errorMsg})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[errorMsg&&/*#__PURE__*/_jsx(\"div\",{style:{background:'#fee2e2',color:'#991b1b',padding:'0.75rem',borderRadius:'0.5rem',marginBottom:'1rem',border:'1px solid #fecaca'},children:errorMsg}),activeTab==='overview'&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{style:{marginBottom:'2rem'},children:\"Dashboard Overview\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{style:{background:'white',padding:'2rem',borderRadius:'1rem',boxShadow:'0 4px 6px -1px rgba(0, 0, 0, 0.1)'},children:[/*#__PURE__*/_jsx(\"h3\",{style:{fontSize:'2rem',fontWeight:'800',color:'#667eea'},children:visits.length}),/*#__PURE__*/_jsx(\"p\",{style:{color:'#6b7280'},children:\"Scheduled Visits\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{background:'white',padding:'2rem',borderRadius:'1rem',boxShadow:'0 4px 6px -1px rgba(0, 0, 0, 0.1)'},children:[/*#__PURE__*/_jsx(\"h3\",{style:{fontSize:'2rem',fontWeight:'800',color:'#10b981'},children:leases.length}),/*#__PURE__*/_jsx(\"p\",{style:{color:'#6b7280'},children:\"Active Leases\"})]}),(user.role==='OWNER'||user.role==='ADMIN')&&/*#__PURE__*/_jsxs(\"div\",{style:{background:'white',padding:'2rem',borderRadius:'1rem',boxShadow:'0 4px 6px -1px rgba(0, 0, 0, 0.1)'},children:[/*#__PURE__*/_jsx(\"h3\",{style:{fontSize:'2rem',fontWeight:'800',color:'#f59e0b'},children:properties.length}),/*#__PURE__*/_jsx(\"p\",{style:{color:'#6b7280'},children:\"My Properties\"})]})]})]}),activeTab==='visits'&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{style:{marginBottom:'2rem'},children:\"My Visits\"}),visits.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",style:{padding:'3rem'},children:[/*#__PURE__*/_jsx(\"p\",{style:{color:'#6b7280',marginBottom:'1rem'},children:\"No visits scheduled yet.\"}),/*#__PURE__*/_jsx(Link,{to:\"/\",className:\"btn\",children:\"Browse Properties\"})]}):/*#__PURE__*/_jsx(\"div\",{className:\"table-container\",style:{overflowX:'auto'},children:/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Property\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Date & Time\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Proposed\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Reschedule\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Status\"}),(user.role==='OWNER'||user.role==='TENANT')&&/*#__PURE__*/_jsx(\"th\",{children:\"Action\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:visits.map(visit=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:visit.propertyTitle||'Property'}),/*#__PURE__*/_jsx(\"td\",{children:new Date(visit.visitDateTime).toLocaleString()}),/*#__PURE__*/_jsx(\"td\",{children:visit.proposedDateTime?new Date(visit.proposedDateTime).toLocaleString():'—'}),/*#__PURE__*/_jsx(\"td\",{children:visit.rescheduleStatus||'—'}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"span\",{className:\"badge \".concat(visit.status==='PENDING'?'badge-warning':'badge-success'),children:visit.status})}),user.role==='OWNER'&&/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'0.5rem',flexWrap:'wrap'},children:[/*#__PURE__*/_jsxs(\"button\",{className:\"btn-secondary\",onClick:()=>handleToggleVisitStatus(visit),children:[\"Mark \",visit.status==='PENDING'?'Done':'Pending']}),/*#__PURE__*/_jsx(\"button\",{className:\"btn\",onClick:()=>openOwnerRescheduleForm(visit),children:\"Request New Time\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn\",onClick:()=>openVisitChat(visit),children:\"\\uD83D\\uDCAC Chat\"})]})}),user.role==='TENANT'&&/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'0.5rem',flexWrap:'wrap'},children:[visit.rescheduleStatus==='REQUESTED'&&/*#__PURE__*/_jsxs(\"button\",{className:\"btn-secondary\",onClick:()=>handleTenantToggleVisitStatus(visit),children:[\"Mark \",visit.status==='PENDING'?'Done':'Pending']}),visit.rescheduleStatus==='REQUESTED'&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn-success\",onClick:()=>handleTenantRescheduleDecision(visit,'ACCEPTED'),children:\"Accept\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-danger\",onClick:()=>handleTenantRescheduleDecision(visit,'DECLINED'),children:\"Decline\"})]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn\",onClick:()=>openVisitChat(visit),children:\"\\uD83D\\uDCAC Chat\"})]})})]},visit.id))})]})})]}),activeTab==='leases'&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{style:{marginBottom:'2rem'},children:\"My Leases\"}),leases.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"text-center\",style:{padding:'3rem'},children:/*#__PURE__*/_jsx(\"p\",{style:{color:'#6b7280',marginBottom:'1rem'},children:\"No lease applications yet.\"})}):/*#__PURE__*/_jsx(\"div\",{className:\"table-container\",children:/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Property\"}),(user.role==='OWNER'||user.role==='ADMIN')&&/*#__PURE__*/_jsx(\"th\",{children:\"Applicant\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Start Date\"}),/*#__PURE__*/_jsx(\"th\",{children:\"End Date\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Monthly Rent\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Status\"}),(user.role==='OWNER'||user.role==='ADMIN')&&/*#__PURE__*/_jsx(\"th\",{children:\"Action\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Chat\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:leases.map(lease=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:lease.propertyTitle||'Property'}),(user.role==='OWNER'||user.role==='ADMIN')&&/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexDirection:'column'},children:[/*#__PURE__*/_jsx(\"span\",{style:{fontWeight:600},children:lease.tenantName||'—'}),lease.tenantEmail&&/*#__PURE__*/_jsx(\"span\",{style:{color:'#6b7280',fontSize:'0.85rem'},children:lease.tenantEmail})]})}),/*#__PURE__*/_jsx(\"td\",{children:new Date(lease.startDate).toLocaleDateString()}),/*#__PURE__*/_jsx(\"td\",{children:new Date(lease.endDate).toLocaleDateString()}),/*#__PURE__*/_jsx(\"td\",{children:formatINR(lease.monthlyRent)}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"span\",{className:\"badge \".concat(lease.status==='DRAFT'?'badge-warning':'badge-success'),children:lease.status})}),(user.role==='OWNER'||user.role==='ADMIN')&&/*#__PURE__*/_jsx(\"td\",{children:lease.status==='DRAFT'?/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'0.5rem',flexWrap:'wrap'},children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn-success\",onClick:()=>handleLeaseDecision(lease,'APPROVED'),children:\"Approve\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-danger\",onClick:()=>handleLeaseDecision(lease,'REJECTED'),children:\"Reject\"})]}):/*#__PURE__*/_jsx(\"button\",{className:\"btn-secondary\",onClick:()=>handleLeaseDecision(lease,'DRAFT'),children:\"Mark Draft\"})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"btn\",onClick:()=>openLeaseChat(lease),children:\"\\uD83D\\uDCAC Chat\"})})]},lease.id))})]})})]}),activeTab==='properties'&&(user.role==='OWNER'||user.role==='ADMIN')&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center',marginBottom:'2rem'},children:[/*#__PURE__*/_jsx(\"h2\",{children:\"My Properties\"}),/*#__PURE__*/_jsx(Link,{to:\"/post\",className:\"btn\",children:\"+ Add Property\"})]}),properties.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",style:{padding:'3rem'},children:[/*#__PURE__*/_jsx(\"p\",{style:{color:'#6b7280',marginBottom:'1rem'},children:\"No properties listed yet.\"}),/*#__PURE__*/_jsx(Link,{to:\"/post\",className:\"btn\",children:\"List Your First Property\"})]}):/*#__PURE__*/_jsx(\"div\",{className:\"property-grid\",style:{display:'grid',gridTemplateColumns:'repeat(auto-fill, minmax(280px, 1fr))',gap:'1.25rem'},children:properties.map(property=>/*#__PURE__*/_jsxs(\"div\",{className:\"property-card\",children:[/*#__PURE__*/_jsx(Link,{to:\"/property/\".concat(property.id),style:{textDecoration:'none',color:'inherit'},children:/*#__PURE__*/_jsx(\"h3\",{className:\"property-title truncate\",style:{fontSize:'1.1rem',fontWeight:'700',marginBottom:'0.35rem'},children:property.title})}),/*#__PURE__*/_jsx(\"p\",{className:\"property-address\",style:{color:'#6b7280',marginBottom:'0.75rem'},children:property.address}),/*#__PURE__*/_jsxs(\"div\",{className:\"property-meta-row\",style:{marginBottom:'0.75rem'},children:[/*#__PURE__*/_jsx(\"span\",{className:\"property-price\",children:formatINR(property.price)}),/*#__PURE__*/_jsx(\"span\",{className:\"badge \".concat(property.available?'badge-success':'badge-danger'),children:property.available?'Available':'Occupied'}),/*#__PURE__*/_jsxs(\"span\",{className:\"property-status\",children:[\"Status: \",property.available?'Available':'Occupied']})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"property-actions-row\",style:{display:'flex',gap:'0.5rem',justifyContent:'space-between',alignItems:'center',flexWrap:'wrap'},children:[/*#__PURE__*/_jsx(\"button\",{className:property.available?'btn-secondary':'btn-success',onClick:()=>handleToggleAvailability(property),disabled:!!toggling[property.id],children:toggling[property.id]?'Updating…':property.available?'Mark Occupied':'Mark Available'}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'0.5rem',flexShrink:0},children:[/*#__PURE__*/_jsx(Link,{to:\"/property/\".concat(property.id),className:\"btn btn-secondary\",style:{textDecoration:'none'},children:\"View\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-danger\",onClick:()=>handleDeleteProperty(property.id),children:\"Delete\"})]})]})]},property.id))})]})]})})]}),chatOpen&&/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\",onClick:()=>setChatOpen(false),children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center',marginBottom:'1rem'},children:[/*#__PURE__*/_jsxs(\"h3\",{style:{fontSize:'1.25rem',fontWeight:700},children:[\"Chat - \",(chatVisit===null||chatVisit===void 0?void 0:chatVisit.propertyTitle)||'Visit']}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setChatOpen(false),style:{background:'none',border:'none',fontSize:'1.5rem',cursor:'pointer'},children:\"\\xD7\"})]}),/*#__PURE__*/_jsx(\"div\",{style:{maxHeight:'300px',overflowY:'auto',border:'1px solid #e5e7eb',borderRadius:'0.5rem',padding:'0.75rem',marginBottom:'0.75rem'},children:chatMessages.length===0?/*#__PURE__*/_jsx(\"p\",{style:{color:'#6b7280'},children:\"No messages yet.\"}):chatMessages.map(m=>{var _m$createdAt;return/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'0.5rem'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'0.8rem',color:'#6b7280'},children:[m.senderRole,\" \\xB7 \",(_m$createdAt=m.createdAt)===null||_m$createdAt===void 0?void 0:_m$createdAt.replace('T',' ').slice(0,16)]}),/*#__PURE__*/_jsx(\"div\",{children:m.message})]},m.id);})}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'0.5rem'},children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:chatInput,onChange:e=>setChatInput(e.target.value),placeholder:\"Type a message...\",style:{flex:1}}),/*#__PURE__*/_jsx(\"button\",{className:\"btn\",onClick:sendChatMessage,disabled:chatSending||!chatInput.trim(),children:chatSending?'Sending…':'Send'})]})]})})]});}","map":{"version":3,"names":["React","useState","useEffect","useCallback","useRef","Link","getVisits","updateVisitStatus","getLeases","getAdminProperties","getOwnerProperties","deleteProperty","toggleProperty","getVisitsByOwner","getVisitsByTenant","updateLeaseStatus","requestVisitReschedule","decideVisitReschedule","tenantUpdateVisitStatus","getVisitMessages","postVisitMessage","getLeaseMessages","postLeaseMessage","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Dashboard","_user$name","_user$name$charAt","activeTab","setActiveTab","visits","setVisits","leases","setLeases","properties","setProperties","loading","setLoading","toast","setToast","visible","type","message","toggling","setToggling","errorMsg","setErrorMsg","loadingRef","abortRef","loaded","setLoaded","overview","chatOpen","setChatOpen","chatVisit","setChatVisit","chatMode","setChatMode","chatMessages","setChatMessages","chatSending","setChatSending","chatInput","setChatInput","rescheduleOpen","setRescheduleOpen","rescheduleVisit","setRescheduleVisit","rescheduleInput","setRescheduleInput","rescheduleSubmitting","setRescheduleSubmitting","rescheduleError","setRescheduleError","user","JSON","parse","localStorage","getItem","formatINR","value","undefined","Intl","NumberFormat","style","currency","maximumFractionDigits","format","_unused","concat","Number","toLocaleString","openVisitChat","visit","msgs","id","Array","isArray","err","console","error","showToast","openLeaseChat","lease","propertyTitle","sendChatMessage","trim","saved","prev","openOwnerRescheduleForm","base","visitDateTime","Date","pad","n","padStart","isoLocal","getFullYear","getMonth","getDate","getHours","getMinutes","submitOwnerReschedule","e","_e$preventDefault","preventDefault","call","updated","map","v","_objectSpread","proposedDateTime","rescheduleStatus","handleTenantRescheduleDecision","decision","toLowerCase","handleTenantToggleVisitStatus","next","status","handleLeaseDecision","l","handleToggleAvailability","property","_updated$available2","p","_updated$available","available","role","propertiesData","getOwnerOrAdminProperties","newStatus","catch","loadTabData","tab","current","abort","_unused2","controller","AbortController","visitsData","email","leasesData","initRef","t","setTimeout","clearTimeout","handleToggleVisitStatus","handleDeleteProperty","window","confirm","filter","className","children","padding","marginBottom","color","to","position","top","right","zIndex","borderRadius","background","boxShadow","onClick","stopPropagation","display","justifyContent","alignItems","fontSize","fontWeight","border","cursor","onSubmit","onChange","target","min","toISOString","slice","required","gap","disabled","width","height","margin","name","charAt","toUpperCase","textAlign","transition","marginTop","length","overflowX","flexWrap","flexDirection","tenantName","tenantEmail","startDate","toLocaleDateString","endDate","monthlyRent","gridTemplateColumns","textDecoration","title","address","price","flexShrink","maxHeight","overflowY","m","_m$createdAt","senderRole","createdAt","replace","placeholder","flex"],"sources":["/Users/milankhanchi/PropertyHubFinal/PropertyHub/frontend/src/components/Dashboard.js"],"sourcesContent":["import React, { useState, useEffect, useCallback, useRef } from 'react';\nimport { Link } from 'react-router-dom';\nimport { getVisits, updateVisitStatus, getLeases, getAdminProperties, getOwnerProperties, deleteProperty, toggleProperty, getVisitsByOwner, getVisitsByTenant, updateLeaseStatus, requestVisitReschedule, decideVisitReschedule, tenantUpdateVisitStatus, getVisitMessages, postVisitMessage, getLeaseMessages, postLeaseMessage } from '../api';\n\nexport default function Dashboard() {\n  const [activeTab, setActiveTab] = useState('overview');\n  const [visits, setVisits] = useState([]);\n  const [leases, setLeases] = useState([]);\n  const [properties, setProperties] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [toast, setToast] = useState({ visible: false, type: 'info', message: '' });\n  const [toggling, setToggling] = useState({}); // { [propertyId]: true }\n  const [errorMsg, setErrorMsg] = useState('');\n  const loadingRef = useRef(false);\n  const abortRef = useRef(null);\n  const [loaded, setLoaded] = useState({ overview: false, visits: false, leases: false, properties: false });\n  const [chatOpen, setChatOpen] = useState(false);\n  const [chatVisit, setChatVisit] = useState(null);\n  const [chatMode, setChatMode] = useState('VISIT');\n  const [chatMessages, setChatMessages] = useState([]);\n  const [chatSending, setChatSending] = useState(false);\n  const [chatInput, setChatInput] = useState('');\n  const [rescheduleOpen, setRescheduleOpen] = useState(false);\n  const [rescheduleVisit, setRescheduleVisit] = useState(null);\n  const [rescheduleInput, setRescheduleInput] = useState('');\n  const [rescheduleSubmitting, setRescheduleSubmitting] = useState(false);\n  const [rescheduleError, setRescheduleError] = useState('');\n\n  const user = JSON.parse(localStorage.getItem('user') || 'null');\n\n  const formatINR = (value) => {\n    if (value === null || value === undefined) return '₹0';\n    try {\n      return new Intl.NumberFormat('en-IN', { style: 'currency', currency: 'INR', maximumFractionDigits: 0 }).format(value);\n    } catch {\n      return `₹${Number(value).toLocaleString('en-IN')}`;\n    }\n  };\n\n  async function openVisitChat(visit) {\n    setChatMode('VISIT');\n    setChatVisit(visit);\n    setChatOpen(true);\n    try {\n      const msgs = await getVisitMessages(visit.id);\n      setChatMessages(Array.isArray(msgs) ? msgs : []);\n    } catch (err) {\n      console.error('Failed to load messages:', err);\n      showToast('error', 'Failed to load messages');\n    }\n  }\n\n  async function openLeaseChat(lease) {\n    setChatMode('LEASE');\n    setChatVisit({ id: lease.id, propertyTitle: lease.propertyTitle });\n    setChatOpen(true);\n    try {\n      const msgs = await getLeaseMessages(lease.id);\n      setChatMessages(Array.isArray(msgs) ? msgs : []);\n    } catch (err) {\n      console.error('Failed to load messages:', err);\n      showToast('error', 'Failed to load messages');\n    }\n  }\n\n  async function sendChatMessage() {\n    if (!chatVisit || !chatInput.trim()) return;\n    setChatSending(true);\n    try {\n      const saved = chatMode === 'LEASE'\n        ? await postLeaseMessage(chatVisit.id, chatInput.trim())\n        : await postVisitMessage(chatVisit.id, chatInput.trim());\n      setChatMessages(prev => [...prev, saved]);\n      setChatInput('');\n    } catch (err) {\n      console.error('Failed to send message:', err);\n      showToast('error', 'Failed to send message');\n    } finally {\n      setChatSending(false);\n    }\n  }\n\n  function openOwnerRescheduleForm(visit) {\n    const base = visit.visitDateTime ? new Date(visit.visitDateTime) : new Date();\n    const pad = (n) => `${n}`.padStart(2, '0');\n    const isoLocal = `${base.getFullYear()}-${pad(base.getMonth()+1)}-${pad(base.getDate())}T${pad(base.getHours())}:${pad(base.getMinutes())}`;\n    setRescheduleVisit(visit);\n    setRescheduleInput(isoLocal);\n    setRescheduleError('');\n    setRescheduleOpen(true);\n  }\n\n  async function submitOwnerReschedule(e) {\n    e?.preventDefault?.();\n    if (!rescheduleVisit || !rescheduleInput) return;\n    setRescheduleSubmitting(true);\n    setRescheduleError('');\n    try {\n      const updated = await requestVisitReschedule(rescheduleVisit.id, rescheduleInput);\n      setVisits(prev => prev.map(v => v.id === rescheduleVisit.id ? { ...v, proposedDateTime: updated.proposedDateTime, rescheduleStatus: updated.rescheduleStatus } : v));\n      setRescheduleOpen(false);\n      setRescheduleVisit(null);\n      setRescheduleInput('');\n      showToast('success', 'Reschedule requested');\n    } catch (err) {\n      console.error('Failed to request reschedule:', err);\n      setRescheduleError(err?.message || 'Failed to request reschedule');\n    } finally {\n      setRescheduleSubmitting(false);\n    }\n  }\n\n  async function handleTenantRescheduleDecision(visit, decision) {\n    try {\n      const updated = await decideVisitReschedule(visit.id, decision);\n      setVisits(prev => prev.map(v => v.id === visit.id ? { ...v, visitDateTime: updated.visitDateTime, proposedDateTime: updated.proposedDateTime, rescheduleStatus: updated.rescheduleStatus } : v));\n      showToast('success', `Reschedule ${decision.toLowerCase()}`);\n    } catch (err) {\n      console.error('Failed to submit decision:', err);\n      showToast('error', 'Failed to submit decision: ' + (err?.message || 'Unknown error'));\n    }\n  }\n\n  async function handleTenantToggleVisitStatus(visit) {\n    const next = visit.status === 'PENDING' ? 'DONE' : 'PENDING';\n    try {\n      const updated = await tenantUpdateVisitStatus(visit.id, next);\n      setVisits(prev => prev.map(v => v.id === visit.id ? { ...v, status: updated.status } : v));\n      showToast('success', `Visit marked as ${next}`);\n    } catch (err) {\n      console.error('Failed to update visit status:', err);\n      showToast('error', 'Failed to update visit status: ' + (err?.message || 'Unknown error'));\n    }\n  }\n\n  async function handleLeaseDecision(lease, value) {\n    try {\n      const updated = await updateLeaseStatus(lease.id, value);\n      setLeases(prev => prev.map(l => l.id === lease.id ? { ...l, status: updated.status } : l));\n      showToast('success', `Lease ${value.toLowerCase()} successfully`);\n    } catch (err) {\n      console.error('Failed to update lease status:', err);\n      showToast('error', 'Failed to update lease: ' + (err?.message || 'Unknown error'));\n    }\n  }\n\n  async function handleToggleAvailability(property) {\n    try {\n      const updated = await toggleProperty(property.id);\n      // Optimistically update current list for snappier UI\n      setProperties(prev => prev.map(p => p.id === property.id ? { ...p, available: updated?.available ?? !p.available } : p));\n      if (user?.role === 'OWNER' || user?.role === 'ADMIN') {\n        const propertiesData = await getOwnerOrAdminProperties();\n        setProperties(propertiesData);\n      }\n      const newStatus = updated?.available ?? !property.available;\n      showToast('success', `Property marked as ${newStatus ? 'Available' : 'Occupied'}`);\n    } catch (err) {\n      console.error('Failed to toggle availability:', err);\n      showToast('error', 'Failed to toggle availability: ' + (err?.message || 'Unknown error'));\n    }\n  }\n\n  // helper: fetch ONLY properties owned by the signed-in user (even for ADMIN)\n  async function getOwnerOrAdminProperties() {\n    if (!user?.id) return [];\n    return await getOwnerProperties(user.id).catch(() => []);\n  }\n\n  const loadTabData = useCallback(async (tab) => {\n    if (loadingRef.current) return; // prevent overlapping loads\n    // If already loaded once, do not re-fetch automatically\n    if (loaded[tab]) {\n      setLoading(false);\n      return;\n    }\n    loadingRef.current = true;\n    setLoading(true);\n    setErrorMsg('');\n    // abort previous if any\n    if (abortRef.current) {\n      try { abortRef.current.abort(); } catch {}\n    }\n    const controller = new AbortController();\n    abortRef.current = controller;\n    try {\n      if (tab === 'visits') {\n        // Role-scoped visits\n        let visitsData = [];\n        if (user?.role === 'TENANT') {\n          visitsData = await getVisitsByTenant(user.email).catch(() => []);\n        } else if (user?.role === 'OWNER') {\n          visitsData = await getVisitsByOwner(user.id).catch(() => []);\n        } else if (user?.role === 'ADMIN') {\n          visitsData = await getVisits().catch(() => []);\n        }\n        setVisits(visitsData || []);\n        setLoaded(prev => ({ ...prev, visits: true }));\n      } else if (tab === 'leases') {\n        const leasesData = await getLeases().catch(() => []);\n        setLeases(leasesData || []);\n        setLoaded(prev => ({ ...prev, leases: true }));\n      } else if (tab === 'properties') {\n        // Load properties for owner/admin only\n        const propertiesData = await getOwnerOrAdminProperties();\n        setProperties(propertiesData || []);\n        setLoaded(prev => ({ ...prev, properties: true }));\n      } else if (tab === 'overview') {\n        // Lightweight default: load minimal needed, sequentially to reduce concurrency\n        let v = [];\n        if (user?.role === 'TENANT') v = await getVisitsByTenant(user.email).catch(() => []);\n        else if (user?.role === 'OWNER') v = await getVisitsByOwner(user.id).catch(() => []);\n        else if (user?.role === 'ADMIN') v = await getVisits().catch(() => []);\n        setVisits(v || []);\n\n        const l = await getLeases().catch(() => []);\n        setLeases(l || []);\n\n        if (user?.role === 'OWNER' || user?.role === 'ADMIN') {\n          const propertiesData = await getOwnerOrAdminProperties();\n          setProperties(propertiesData || []);\n        }\n        setLoaded(prev => ({ ...prev, overview: true }));\n      }\n    } catch (err) {\n      console.error('Error loading tab data:', err);\n      setErrorMsg(err?.message || 'Failed to load data');\n    } finally {\n      setLoading(false);\n      loadingRef.current = false;\n      setLoaded(prev => ({ ...prev, [tab]: true }));\n    }\n  }, [user, loaded]);\n\n  const initRef = useRef(false);\n  useEffect(() => {\n    // Prevent StrictMode double-effect on mount\n    if (!initRef.current) {\n      initRef.current = true;\n      loadTabData(activeTab);\n      return;\n    }\n    // On actual tab changes, load as needed\n    loadTabData(activeTab);\n  // Intentionally exclude loadTabData from deps to keep a stable trigger\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [activeTab]);\n\n  // Safety net: stop spinner if something keeps pending too long\n  useEffect(() => {\n    if (!loading) return;\n    const t = setTimeout(() => {\n      setLoading(false);\n      setErrorMsg(prev => prev || 'Taking longer than usual. Please refresh the page.');\n    }, 8000);\n    return () => clearTimeout(t);\n  }, [loading]);\n\n  async function handleToggleVisitStatus(visit) {\n    const current = visit.status;\n    const next = current === 'PENDING' ? 'DONE' : 'PENDING';\n    try {\n      const updated = await updateVisitStatus(visit.id, next);\n      setVisits(prev => prev.map(v => v.id === visit.id ? { ...v, status: updated.status } : v));\n      showToast('success', `Visit marked as ${updated.status}`);\n    } catch (err) {\n      console.error('Failed to update visit status:', err);\n      showToast('error', 'Failed to update visit status: ' + (err?.message || 'Unknown error'));\n    }\n  }\n\n  async function handleDeleteProperty(id) {\n    if (!window.confirm('Are you sure you want to delete this property? This action cannot be undone.')) return;\n    try {\n      // Optimistically update UI first\n      setProperties(prev => prev.filter(p => p.id !== id));\n      await deleteProperty(id);\n      // Refresh properties list\n      if (user?.role === 'OWNER' || user?.role === 'ADMIN') {\n        const propertiesData = await getOwnerOrAdminProperties().catch(() => []);\n        setProperties(propertiesData || []);\n      }\n      showToast('success', 'Property deleted successfully');\n    } catch (err) {\n      console.error('Failed to delete property:', err);\n      showToast('error', 'Failed to delete property: ' + (err?.message || 'Unknown error'));\n    }\n  }\n\n  function showToast(type, message) {\n    setToast({ visible: true, type, message });\n    // auto-hide after 3 seconds\n    setTimeout(() => setToast(prev => ({ ...prev, visible: false })), 3000);\n  }\n\n  if (!user) {\n    return (\n      <div className=\"content\">\n        <div className=\"text-center\" style={{ padding: '4rem' }}>\n          <h2 style={{ marginBottom: '1rem' }}>Please Sign In</h2>\n          <p style={{ color: '#6b7280', marginBottom: '2rem' }}>\n            You need to be signed in to access your dashboard.\n          </p>\n          <Link to=\"/auth\" className=\"btn\">Sign In</Link>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"content\">\n      {/* Toast Notification */}\n      {toast.visible && (\n        <div\n          style={{\n            position: 'fixed',\n            top: '1rem',\n            right: '1rem',\n            zIndex: 9999,\n            padding: '0.75rem 1rem',\n            borderRadius: '0.5rem',\n            color: '#fff',\n            background: toast.type === 'success' ? '#10b981' : toast.type === 'error' ? '#ef4444' : '#3b82f6',\n            boxShadow: '0 10px 15px -3px rgba(0,0,0,0.1), 0 4px 6px -4px rgba(0,0,0,0.1)'\n          }}\n          role=\"alert\"\n        >\n          {toast.message}\n        </div>\n      )}\n\n      {/* Owner Reschedule Modal */}\n      {rescheduleOpen && (\n        <div className=\"modal-overlay\" onClick={() => setRescheduleOpen(false)}>\n          <div className=\"modal-content\" onClick={(e) => e.stopPropagation()}>\n            <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '1rem' }}>\n              <h3 style={{ fontSize: '1.25rem', fontWeight: 700 }}>Propose New Visit Time</h3>\n              <button onClick={() => setRescheduleOpen(false)} style={{ background: 'none', border: 'none', fontSize: '1.5rem', cursor: 'pointer' }}>×</button>\n            </div>\n\n            {rescheduleError && (\n              <div style={{ background: '#fee2e2', color: '#991b1b', padding: '0.75rem', borderRadius: '0.5rem', marginBottom: '0.75rem', border: '1px solid #fecaca' }}>\n                {rescheduleError}\n              </div>\n            )}\n\n            <form onSubmit={submitOwnerReschedule}>\n              <div className=\"form-group\">\n                <label className=\"form-label\">New Date & Time</label>\n                <input\n                  type=\"datetime-local\"\n                  value={rescheduleInput}\n                  onChange={(e) => setRescheduleInput(e.target.value)}\n                  min={new Date().toISOString().slice(0,16)}\n                  required\n                />\n              </div>\n              <div style={{ display: 'flex', gap: '0.5rem', justifyContent: 'flex-end' }}>\n                <button type=\"button\" className=\"btn-secondary\" onClick={() => setRescheduleOpen(false)}>Cancel</button>\n                <button type=\"submit\" disabled={rescheduleSubmitting}>{rescheduleSubmitting ? 'Submitting…' : 'Submit'}</button>\n              </div>\n            </form>\n          </div>\n        </div>\n      )}\n      <div className=\"dashboard-grid\">\n        {/* Sidebar */}\n        <div className=\"sidebar\">\n          <div style={{ marginBottom: '2rem' }}>\n            <div style={{ \n              width: '60px', \n              height: '60px', \n              borderRadius: '50%', \n              background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\n              display: 'flex',\n              alignItems: 'center',\n              justifyContent: 'center',\n              color: 'white',\n              fontWeight: '700',\n              fontSize: '1.5rem',\n              margin: '0 auto 1rem'\n            }}>\n              {user.name?.charAt(0)?.toUpperCase()}\n            </div>\n            <h3 style={{ textAlign: 'center', marginBottom: '0.5rem' }}>{user.name}</h3>\n            <p style={{ textAlign: 'center', color: '#6b7280', fontSize: '0.875rem' }}>\n              {user.role}\n            </p>\n          </div>\n\n          <nav>\n            <button\n              onClick={() => setActiveTab('overview')}\n              className={activeTab === 'overview' ? 'active' : ''}\n              style={{ \n                width: '100%', \n                textAlign: 'left', \n                background: 'none', \n                border: 'none',\n                padding: '0.75rem 1rem',\n                borderRadius: '0.5rem',\n                cursor: 'pointer',\n                transition: 'all 0.3s ease',\n                display: 'flex',\n                alignItems: 'center',\n                gap: '0.5rem',\n                color: '#4a5568',\n                fontWeight: 600\n              }}\n            >\n              <span role=\"img\" aria-label=\"overview\">📊</span>\n              <span>Overview</span>\n            </button>\n            <button\n              onClick={() => setActiveTab('visits')}\n              className={activeTab === 'visits' ? 'active' : ''}\n              style={{ \n                width: '100%', \n                textAlign: 'left', \n                background: 'none', \n                border: 'none',\n                padding: '0.75rem 1rem',\n                borderRadius: '0.5rem',\n                cursor: 'pointer',\n                transition: 'all 0.3s ease',\n                display: 'flex',\n                alignItems: 'center',\n                gap: '0.5rem',\n                color: '#4a5568',\n                fontWeight: 600\n              }}\n            >\n              <span role=\"img\" aria-label=\"visits\">📅</span>\n              <span>My Visits</span>\n            </button>\n            <button\n              onClick={() => setActiveTab('leases')}\n              className={activeTab === 'leases' ? 'active' : ''}\n              style={{ \n                width: '100%', \n                textAlign: 'left', \n                background: 'none', \n                border: 'none',\n                padding: '0.75rem 1rem',\n                borderRadius: '0.5rem',\n                cursor: 'pointer',\n                transition: 'all 0.3s ease',\n                display: 'flex',\n                alignItems: 'center',\n                gap: '0.5rem',\n                color: '#4a5568',\n                fontWeight: 600\n              }}\n            >\n              <span role=\"img\" aria-label=\"leases\">📋</span>\n              <span>My Leases</span>\n            </button>\n            {(user.role === 'OWNER' || user.role === 'ADMIN') && (\n              <button\n                onClick={() => setActiveTab('properties')}\n                className={activeTab === 'properties' ? 'active' : ''}\n                style={{ \n                  width: '100%', \n                  textAlign: 'left', \n                  background: 'none', \n                  border: 'none',\n                  padding: '0.75rem 1rem',\n                  borderRadius: '0.5rem',\n                  cursor: 'pointer',\n                  transition: 'all 0.3s ease',\n                  display: 'flex',\n                  alignItems: 'center',\n                  gap: '0.5rem',\n                  color: '#4a5568',\n                  fontWeight: 600\n                }}\n              >\n                <span role=\"img\" aria-label=\"properties\">🏠</span>\n                <span>My Properties (Owned)</span>\n              </button>\n            )}\n          </nav>\n        </div>\n\n        {/* Main Content */}\n        <div>\n          {loading ? (\n            <div className=\"text-center\" style={{ padding: '4rem' }}>\n              <div className=\"loading\" style={{ width: '40px', height: '40px', margin: '0 auto' }}></div>\n              <p style={{ marginTop: '1rem', color: '#6b7280' }}>Loading dashboard...</p>\n              {errorMsg && (\n                <p style={{ marginTop: '0.5rem', color: '#ef4444' }}>{errorMsg}</p>\n              )}\n            </div>\n          ) : (\n            <>\n              {errorMsg && (\n                <div style={{\n                  background: '#fee2e2', color: '#991b1b', padding: '0.75rem', borderRadius: '0.5rem', marginBottom: '1rem', border: '1px solid #fecaca'\n                }}>\n                  {errorMsg}\n                </div>\n              )}\n              {activeTab === 'overview' && (\n                <div>\n                  <h2 style={{ marginBottom: '2rem' }}>Dashboard Overview</h2>\n                  <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n                    <div style={{ background: 'white', padding: '2rem', borderRadius: '1rem', boxShadow: '0 4px 6px -1px rgba(0, 0, 0, 0.1)' }}>\n                      <h3 style={{ fontSize: '2rem', fontWeight: '800', color: '#667eea' }}>{visits.length}</h3>\n                      <p style={{ color: '#6b7280' }}>Scheduled Visits</p>\n                    </div>\n                    <div style={{ background: 'white', padding: '2rem', borderRadius: '1rem', boxShadow: '0 4px 6px -1px rgba(0, 0, 0, 0.1)' }}>\n                      <h3 style={{ fontSize: '2rem', fontWeight: '800', color: '#10b981' }}>{leases.length}</h3>\n                      <p style={{ color: '#6b7280' }}>Active Leases</p>\n                    </div>\n                    {(user.role === 'OWNER' || user.role === 'ADMIN') && (\n                      <div style={{ background: 'white', padding: '2rem', borderRadius: '1rem', boxShadow: '0 4px 6px -1px rgba(0, 0, 0, 0.1)' }}>\n                        <h3 style={{ fontSize: '2rem', fontWeight: '800', color: '#f59e0b' }}>{properties.length}</h3>\n                        <p style={{ color: '#6b7280' }}>My Properties</p>\n                      </div>\n                    )}\n                  </div>\n                </div>\n              )}\n\n              {activeTab === 'visits' && (\n                <div>\n                  <h2 style={{ marginBottom: '2rem' }}>My Visits</h2>\n                  {visits.length === 0 ? (\n                    <div className=\"text-center\" style={{ padding: '3rem' }}>\n                      <p style={{ color: '#6b7280', marginBottom: '1rem' }}>No visits scheduled yet.</p>\n                      <Link to=\"/\" className=\"btn\">Browse Properties</Link>\n                    </div>\n                  ) : (\n                    <div className=\"table-container\" style={{ overflowX: 'auto' }}>\n                      <table>\n                        <thead>\n                          <tr>\n                            <th>Property</th>\n                            <th>Date & Time</th>\n                            <th>Proposed</th>\n                            <th>Reschedule</th>\n                            <th>Status</th>\n                            {(user.role === 'OWNER' || user.role === 'TENANT') && <th>Action</th>}\n                          </tr>\n                        </thead>\n                        <tbody>\n                          {visits.map((visit) => (\n                            <tr key={visit.id}>\n                              <td>{visit.propertyTitle || 'Property'}</td>\n                              <td>{new Date(visit.visitDateTime).toLocaleString()}</td>\n                              <td>{visit.proposedDateTime ? new Date(visit.proposedDateTime).toLocaleString() : '—'}</td>\n                              <td>{visit.rescheduleStatus || '—'}</td>\n                              <td>\n                                <span className={`badge ${visit.status === 'PENDING' ? 'badge-warning' : 'badge-success'}`}>\n                                  {visit.status}\n                                </span>\n                              </td>\n                              {(user.role === 'OWNER') && (\n                                <td>\n                                  <div style={{ display: 'flex', gap: '0.5rem', flexWrap: 'wrap' }}>\n                                    <button className=\"btn-secondary\" onClick={() => handleToggleVisitStatus(visit)}>\n                                      Mark {visit.status === 'PENDING' ? 'Done' : 'Pending'}\n                                    </button>\n                                    <button className=\"btn\" onClick={() => openOwnerRescheduleForm(visit)}>\n                                      Request New Time\n                                    </button>\n                                    <button className=\"btn\" onClick={() => openVisitChat(visit)}>\n                                      💬 Chat\n                                    </button>\n                                  </div>\n                                </td>\n                              )}\n                              {(user.role === 'TENANT') && (\n                                <td>\n                                  <div style={{ display: 'flex', gap: '0.5rem', flexWrap: 'wrap' }}>\n                                    {visit.rescheduleStatus === 'REQUESTED' && (\n                                      <button className=\"btn-secondary\" onClick={() => handleTenantToggleVisitStatus(visit)}>\n                                        Mark {visit.status === 'PENDING' ? 'Done' : 'Pending'}\n                                      </button>\n                                    )}\n                                    {visit.rescheduleStatus === 'REQUESTED' && (\n                                      <>\n                                        <button className=\"btn-success\" onClick={() => handleTenantRescheduleDecision(visit, 'ACCEPTED')}>Accept</button>\n                                        <button className=\"btn-danger\" onClick={() => handleTenantRescheduleDecision(visit, 'DECLINED')}>Decline</button>\n                                      </>\n                                    )}\n                                    <button className=\"btn\" onClick={() => openVisitChat(visit)}>\n                                      💬 Chat\n                                    </button>\n                                  </div>\n                                </td>\n                              )}\n                            </tr>\n                          ))}\n                        </tbody>\n                      </table>\n                    </div>\n                  )}\n                </div>\n              )}\n\n              {activeTab === 'leases' && (\n                <div>\n                  <h2 style={{ marginBottom: '2rem' }}>My Leases</h2>\n                  {leases.length === 0 ? (\n                    <div className=\"text-center\" style={{ padding: '3rem' }}>\n                      <p style={{ color: '#6b7280', marginBottom: '1rem' }}>No lease applications yet.</p>\n                    </div>\n                  ) : (\n                    <div className=\"table-container\">\n                      <table>\n                        <thead>\n                          <tr>\n                            <th>Property</th>\n                            {(user.role === 'OWNER' || user.role === 'ADMIN') && <th>Applicant</th>}\n                            <th>Start Date</th>\n                            <th>End Date</th>\n                            <th>Monthly Rent</th>\n                            <th>Status</th>\n                            {(user.role === 'OWNER' || user.role === 'ADMIN') && <th>Action</th>}\n                            <th>Chat</th>\n                          </tr>\n                        </thead>\n                        <tbody>\n                          {leases.map((lease) => (\n                            <tr key={lease.id}>\n                              <td>{lease.propertyTitle || 'Property'}</td>\n                              {(user.role === 'OWNER' || user.role === 'ADMIN') && (\n                                <td>\n                                  <div style={{ display: 'flex', flexDirection: 'column' }}>\n                                    <span style={{ fontWeight: 600 }}>{lease.tenantName || '—'}</span>\n                                    {lease.tenantEmail && (\n                                      <span style={{ color: '#6b7280', fontSize: '0.85rem' }}>{lease.tenantEmail}</span>\n                                    )}\n                                  </div>\n                                </td>\n                              )}\n                              <td>{new Date(lease.startDate).toLocaleDateString()}</td>\n                              <td>{new Date(lease.endDate).toLocaleDateString()}</td>\n                              <td>{formatINR(lease.monthlyRent)}</td>\n                              <td>\n                                <span className={`badge ${lease.status === 'DRAFT' ? 'badge-warning' : 'badge-success'}`}>\n                                  {lease.status}\n                                </span>\n                              </td>\n                              {(user.role === 'OWNER' || user.role === 'ADMIN') && (\n                                <td>\n                                  {lease.status === 'DRAFT' ? (\n                                    <div style={{ display: 'flex', gap: '0.5rem', flexWrap: 'wrap' }}>\n                                      <button className=\"btn-success\" onClick={() => handleLeaseDecision(lease, 'APPROVED')}>Approve</button>\n                                      <button className=\"btn-danger\" onClick={() => handleLeaseDecision(lease, 'REJECTED')}>Reject</button>\n                                    </div>\n                                  ) : (\n                                    <button className=\"btn-secondary\" onClick={() => handleLeaseDecision(lease, 'DRAFT')}>Mark Draft</button>\n                                  )}\n                                </td>\n                              )}\n                              <td>\n                                <button className=\"btn\" onClick={() => openLeaseChat(lease)}>\n                                  💬 Chat\n                                </button>\n                              </td>\n                            </tr>\n                          ))}\n                        </tbody>\n                      </table>\n                    </div>\n                  )}\n                </div>\n              )}\n\n              {activeTab === 'properties' && (user.role === 'OWNER' || user.role === 'ADMIN') && (\n                <div>\n                  <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '2rem' }}>\n                    <h2>My Properties</h2>\n                    <Link to=\"/post\" className=\"btn\">+ Add Property</Link>\n                  </div>\n                  {properties.length === 0 ? (\n                    <div className=\"text-center\" style={{ padding: '3rem' }}>\n                      <p style={{ color: '#6b7280', marginBottom: '1rem' }}>No properties listed yet.</p>\n                      <Link to=\"/post\" className=\"btn\">List Your First Property</Link>\n                    </div>\n                  ) : (\n                    <div className=\"property-grid\" style={{\n                      display: 'grid',\n                      gridTemplateColumns: 'repeat(auto-fill, minmax(280px, 1fr))',\n                      gap: '1.25rem'\n                    }}>\n                      {properties.map((property) => (\n                        <div key={property.id} className=\"property-card\">\n                          <Link to={`/property/${property.id}`} style={{ textDecoration: 'none', color: 'inherit' }}>\n                            <h3 className=\"property-title truncate\" style={{ fontSize: '1.1rem', fontWeight: '700', marginBottom: '0.35rem' }}>\n                              {property.title}\n                            </h3>\n                          </Link>\n                          <p className=\"property-address\" style={{ color: '#6b7280', marginBottom: '0.75rem' }}>\n                            {property.address}\n                          </p>\n                          <div className=\"property-meta-row\" style={{ marginBottom: '0.75rem' }}>\n                            <span className=\"property-price\">\n                              {formatINR(property.price)}\n                            </span>\n                            <span className={`badge ${property.available ? 'badge-success' : 'badge-danger'}`}>\n                              {property.available ? 'Available' : 'Occupied'}\n                            </span>\n                            <span className=\"property-status\">Status: {property.available ? 'Available' : 'Occupied'}</span>\n                          </div>\n                          <div className=\"property-actions-row\" style={{ display: 'flex', gap: '0.5rem', justifyContent: 'space-between', alignItems: 'center', flexWrap: 'wrap' }}>\n                            <button\n                              className={property.available ? 'btn-secondary' : 'btn-success'}\n                              onClick={() => handleToggleAvailability(property)}\n                              disabled={!!toggling[property.id]}\n                            >\n                              {toggling[property.id] ? 'Updating…' : (property.available ? 'Mark Occupied' : 'Mark Available')}\n                            </button>\n                            <div style={{ display: 'flex', gap: '0.5rem', flexShrink: 0 }}>\n                              <Link to={`/property/${property.id}`} className=\"btn btn-secondary\" style={{ textDecoration: 'none' }}>View</Link>\n                              <button className=\"btn-danger\" onClick={() => handleDeleteProperty(property.id)}>\n                                Delete\n                              </button>\n                            </div>\n                          </div>\n                        </div>\n                      ))}\n                    </div>\n                  )}\n                </div>\n              )}\n            </>\n          )}\n        </div>\n      </div>\n\n      {/* Visit Chat Modal */}\n      {chatOpen && (\n        <div className=\"modal-overlay\" onClick={() => setChatOpen(false)}>\n          <div className=\"modal-content\" onClick={(e) => e.stopPropagation()}>\n            <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '1rem' }}>\n              <h3 style={{ fontSize: '1.25rem', fontWeight: 700 }}>\n                Chat - {chatVisit?.propertyTitle || 'Visit'}\n              </h3>\n              <button onClick={() => setChatOpen(false)} style={{ background: 'none', border: 'none', fontSize: '1.5rem', cursor: 'pointer' }}>×</button>\n            </div>\n\n            <div style={{ maxHeight: '300px', overflowY: 'auto', border: '1px solid #e5e7eb', borderRadius: '0.5rem', padding: '0.75rem', marginBottom: '0.75rem' }}>\n              {chatMessages.length === 0 ? (\n                <p style={{ color: '#6b7280' }}>No messages yet.</p>\n              ) : (\n                chatMessages.map((m) => (\n                  <div key={m.id} style={{ marginBottom: '0.5rem' }}>\n                    <div style={{ fontSize: '0.8rem', color: '#6b7280' }}>{m.senderRole} · {m.createdAt?.replace('T',' ').slice(0,16)}</div>\n                    <div>{m.message}</div>\n                  </div>\n                ))\n              )}\n            </div>\n\n            <div style={{ display: 'flex', gap: '0.5rem' }}>\n              <input\n                type=\"text\"\n                value={chatInput}\n                onChange={(e) => setChatInput(e.target.value)}\n                placeholder=\"Type a message...\"\n                style={{ flex: 1 }}\n              />\n              <button className=\"btn\" onClick={sendChatMessage} disabled={chatSending || !chatInput.trim()}>\n                {chatSending ? 'Sending…' : 'Send'}\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}