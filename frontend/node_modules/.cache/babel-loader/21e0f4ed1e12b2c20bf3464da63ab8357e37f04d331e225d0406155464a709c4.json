{"ast":null,"code":"import _objectSpread from\"/Users/milankhanchi/PropertyHubFinal/PropertyHub/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState}from\"react\";import{registerUser,loginUser}from\"../api\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export default function AuthForm(){const[isLogin,setIsLogin]=useState(true);const[form,setForm]=useState({name:\"\",email:\"\",password:\"\",role:\"TENANT\"});const[loading,setLoading]=useState(false);const[error,setError]=useState(\"\");function change(e){setForm(_objectSpread(_objectSpread({},form),{},{[e.target.name]:e.target.value}));}async function submit(e){e.preventDefault();setLoading(true);setError(\"\");try{var _res$user;const res=isLogin?await loginUser({email:form.email,password:form.password}):await registerUser(form);if(res.error){setError(res.error);return;}// store auth details\nlocalStorage.setItem(\"token\",res.token);localStorage.setItem(\"user\",JSON.stringify(res.user));// Redirect based on role\nif(((_res$user=res.user)===null||_res$user===void 0?void 0:_res$user.role)===\"ADMIN\"){window.location.href=\"/admin\";}else{window.location.href=\"/\";}}catch(err){console.error(err);setError((err===null||err===void 0?void 0:err.message)||\"Authentication failed\");}finally{setLoading(false);}}return/*#__PURE__*/_jsx(\"div\",{className:\"content\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center mb-6\",children:[/*#__PURE__*/_jsx(\"h2\",{style:{fontSize:'2rem',fontWeight:'800',marginBottom:'0.5rem'},children:isLogin?\"Welcome Back\":\"Create Account\"}),/*#__PURE__*/_jsx(\"p\",{style:{color:'#6b7280'},children:isLogin?\"Sign in to your PropertyHub account\":\"Join PropertyHub to find your perfect home\"})]}),error&&/*#__PURE__*/_jsx(\"div\",{style:{background:'#fee2e2',color:'#991b1b',padding:'0.75rem',borderRadius:'0.5rem',marginBottom:'1.5rem',border:'1px solid #fecaca'},children:error}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:submit,children:[!isLogin&&/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Full Name\"}),/*#__PURE__*/_jsx(\"input\",{name:\"name\",placeholder:\"Enter your full name\",value:form.name,onChange:change,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Email Address\"}),/*#__PURE__*/_jsx(\"input\",{name:\"email\",type:\"email\",placeholder:\"Enter your email\",value:form.email,onChange:change,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{name:\"password\",placeholder:\"Enter your password\",value:form.password,onChange:change,type:\"password\",required:true})]}),!isLogin&&/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Account Type\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"role\",value:form.role,onChange:change,children:[/*#__PURE__*/_jsx(\"option\",{value:\"TENANT\",children:\"Tenant - Looking for properties\"}),/*#__PURE__*/_jsx(\"option\",{value:\"OWNER\",children:\"Owner - List my properties\"}),/*#__PURE__*/_jsx(\"option\",{value:\"AGENT\",children:\"Agent - Real estate professional\"})]})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:loading,style:{width:'100%',marginTop:'1rem'},children:loading?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"span\",{className:\"loading\"}),isLogin?\"Signing In...\":\"Creating Account...\"]}):isLogin?\"Sign In\":\"Create Account\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-center mt-6\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setIsLogin(!isLogin);setError(\"\");setForm({name:\"\",email:\"\",password:\"\",role:\"TENANT\"});},className:\"btn-secondary\",style:{background:'transparent',color:'#667eea',textDecoration:'underline'},children:isLogin?\"Need an account? Sign up\":\"Already have an account? Sign in\"})})]})});}","map":{"version":3,"names":["React","useState","registerUser","loginUser","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","AuthForm","isLogin","setIsLogin","form","setForm","name","email","password","role","loading","setLoading","error","setError","change","e","_objectSpread","target","value","submit","preventDefault","_res$user","res","localStorage","setItem","token","JSON","stringify","user","window","location","href","err","console","message","className","children","style","fontSize","fontWeight","marginBottom","color","background","padding","borderRadius","border","onSubmit","placeholder","onChange","required","type","disabled","width","marginTop","onClick","textDecoration"],"sources":["/Users/milankhanchi/PropertyHubFinal/PropertyHub/frontend/src/components/AuthForm.js"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport { registerUser, loginUser } from \"../api\";\r\n\r\nexport default function AuthForm() {\r\n  const [isLogin, setIsLogin] = useState(true);\r\n  const [form, setForm] = useState({ name: \"\", email: \"\", password: \"\", role: \"TENANT\" });\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(\"\");\r\n\r\n  function change(e) {\r\n    setForm({ ...form, [e.target.name]: e.target.value });\r\n  }\r\n\r\n  async function submit(e) {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    setError(\"\");\r\n    \r\n    try {\r\n      const res = isLogin\r\n        ? await loginUser({ email: form.email, password: form.password })\r\n        : await registerUser(form);\r\n\r\n      if (res.error) {\r\n        setError(res.error);\r\n        return;\r\n      }\r\n\r\n      // store auth details\r\n      localStorage.setItem(\"token\", res.token);\r\n      localStorage.setItem(\"user\", JSON.stringify(res.user));\r\n\r\n      // Redirect based on role\r\n      if (res.user?.role === \"ADMIN\") {\r\n        window.location.href = \"/admin\";\r\n      } else {\r\n        window.location.href = \"/\";\r\n      }\r\n    } catch (err) {\r\n      console.error(err);\r\n      setError(err?.message || \"Authentication failed\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"content\">\r\n      <div className=\"form-container\">\r\n        <div className=\"text-center mb-6\">\r\n          <h2 style={{ fontSize: '2rem', fontWeight: '800', marginBottom: '0.5rem' }}>\r\n            {isLogin ? \"Welcome Back\" : \"Create Account\"}\r\n          </h2>\r\n          <p style={{ color: '#6b7280' }}>\r\n            {isLogin ? \"Sign in to your PropertyHub account\" : \"Join PropertyHub to find your perfect home\"}\r\n          </p>\r\n        </div>\r\n\r\n        {error && (\r\n          <div style={{ \r\n            background: '#fee2e2', \r\n            color: '#991b1b', \r\n            padding: '0.75rem', \r\n            borderRadius: '0.5rem', \r\n            marginBottom: '1.5rem',\r\n            border: '1px solid #fecaca'\r\n          }}>\r\n            {error}\r\n          </div>\r\n        )}\r\n\r\n        <form onSubmit={submit}>\r\n          {!isLogin && (\r\n            <div className=\"form-group\">\r\n              <label className=\"form-label\">Full Name</label>\r\n              <input\r\n                name=\"name\"\r\n                placeholder=\"Enter your full name\"\r\n                value={form.name}\r\n                onChange={change}\r\n                required\r\n              />\r\n            </div>\r\n          )}\r\n\r\n          <div className=\"form-group\">\r\n            <label className=\"form-label\">Email Address</label>\r\n            <input\r\n              name=\"email\"\r\n              type=\"email\"\r\n              placeholder=\"Enter your email\"\r\n              value={form.email}\r\n              onChange={change}\r\n              required\r\n            />\r\n          </div>\r\n\r\n          <div className=\"form-group\">\r\n            <label className=\"form-label\">Password</label>\r\n            <input\r\n              name=\"password\"\r\n              placeholder=\"Enter your password\"\r\n              value={form.password}\r\n              onChange={change}\r\n              type=\"password\"\r\n              required\r\n            />\r\n          </div>\r\n\r\n          {!isLogin && (\r\n            <div className=\"form-group\">\r\n              <label className=\"form-label\">Account Type</label>\r\n              <select name=\"role\" value={form.role} onChange={change}>\r\n                <option value=\"TENANT\">Tenant - Looking for properties</option>\r\n                <option value=\"OWNER\">Owner - List my properties</option>\r\n                <option value=\"AGENT\">Agent - Real estate professional</option>\r\n              </select>\r\n            </div>\r\n          )}\r\n\r\n          <button type=\"submit\" disabled={loading} style={{ width: '100%', marginTop: '1rem' }}>\r\n            {loading ? (\r\n              <>\r\n                <span className=\"loading\"></span>\r\n                {isLogin ? \"Signing In...\" : \"Creating Account...\"}\r\n              </>\r\n            ) : (\r\n              isLogin ? \"Sign In\" : \"Create Account\"\r\n            )}\r\n          </button>\r\n        </form>\r\n\r\n        <div className=\"text-center mt-6\">\r\n          <button \r\n            onClick={() => {\r\n              setIsLogin(!isLogin);\r\n              setError(\"\");\r\n              setForm({ name: \"\", email: \"\", password: \"\", role: \"TENANT\" });\r\n            }}\r\n            className=\"btn-secondary\"\r\n            style={{ background: 'transparent', color: '#667eea', textDecoration: 'underline' }}\r\n          >\r\n            {isLogin ? \"Need an account? Sign up\" : \"Already have an account? Sign in\"}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}