{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\mgsm4\\\\OneDrive\\\\Desktop\\\\milan\\\\PropertyHub\\\\frontend\\\\src\\\\components\\\\VisitForm.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from \"react\";\nimport { bookVisit } from \"../api\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function VisitForm({\n  propertyId,\n  onSuccess\n}) {\n  _s();\n  const [form, setForm] = useState({\n    tenantName: \"\",\n    tenantEmail: \"\",\n    visitDateTime: \"\"\n  });\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(\"\");\n  const user = JSON.parse(localStorage.getItem('user') || 'null');\n\n  // Pre-fill user data if available\n  React.useEffect(() => {\n    if (user) {\n      setForm(prev => ({\n        ...prev,\n        tenantName: user.name || \"\",\n        tenantEmail: user.email || \"\"\n      }));\n    }\n  }, [user]);\n  function handleChange(e) {\n    const {\n      name,\n      value\n    } = e.target;\n    setForm(prev => ({\n      ...prev,\n      [name]: value\n    }));\n  }\n  async function handleSubmit(e) {\n    e.preventDefault();\n    setLoading(true);\n    setError(\"\");\n    try {\n      const visitData = {\n        tenantName: form.tenantName,\n        tenantEmail: form.tenantEmail,\n        visitDateTime: form.visitDateTime\n      };\n      await bookVisit(propertyId, visitData);\n      if (onSuccess) onSuccess();\n\n      // Reset form\n      setForm({\n        tenantName: (user === null || user === void 0 ? void 0 : user.name) || \"\",\n        tenantEmail: (user === null || user === void 0 ? void 0 : user.email) || \"\",\n        visitDateTime: \"\"\n      });\n    } catch (err) {\n      console.error(\"Error booking visit:\", err);\n      setError(err.message || \"Failed to book visit\");\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  // Get minimum date (today)\n  const today = new Date().toISOString().slice(0, 16);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [error && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        background: '#fee2e2',\n        color: '#991b1b',\n        padding: '0.75rem',\n        borderRadius: '0.5rem',\n        marginBottom: '1.5rem',\n        border: '1px solid #fecaca'\n      },\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"form-label\",\n          children: \"Your Name\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          name: \"tenantName\",\n          placeholder: \"Enter your full name\",\n          value: form.tenantName,\n          onChange: handleChange,\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"form-label\",\n          children: \"Your Email\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"email\",\n          name: \"tenantEmail\",\n          placeholder: \"Enter your email address\",\n          value: form.tenantEmail,\n          onChange: handleChange,\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"form-label\",\n          children: \"Preferred Visit Date & Time\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"datetime-local\",\n          name: \"visitDateTime\",\n          value: form.visitDateTime,\n          onChange: handleChange,\n          min: today,\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          gap: '1rem',\n          justifyContent: 'flex-end'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          onClick: onSuccess,\n          className: \"btn-secondary\",\n          children: \"Cancel\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          disabled: loading,\n          children: loading ? /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"loading\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 129,\n              columnNumber: 17\n            }, this), \"Booking Visit...\"]\n          }, void 0, true) : \"ðŸ“… Book Visit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 65,\n    columnNumber: 5\n  }, this);\n}\n_s(VisitForm, \"04ZR2lPOe9MQ4mf2FxTE+k7c5vc=\");\n_c = VisitForm;\nvar _c;\n$RefreshReg$(_c, \"VisitForm\");","map":{"version":3,"names":["React","useState","bookVisit","jsxDEV","_jsxDEV","Fragment","_Fragment","VisitForm","propertyId","onSuccess","_s","form","setForm","tenantName","tenantEmail","visitDateTime","loading","setLoading","error","setError","user","JSON","parse","localStorage","getItem","useEffect","prev","name","email","handleChange","e","value","target","handleSubmit","preventDefault","visitData","err","console","message","today","Date","toISOString","slice","children","style","background","color","padding","borderRadius","marginBottom","border","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","className","type","placeholder","onChange","required","min","display","gap","justifyContent","onClick","disabled","_c","$RefreshReg$"],"sources":["C:/Users/mgsm4/OneDrive/Desktop/milan/PropertyHub/frontend/src/components/VisitForm.js"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport { bookVisit } from \"../api\";\r\n\r\nexport default function VisitForm({ propertyId, onSuccess }) {\r\n  const [form, setForm] = useState({\r\n    tenantName: \"\",\r\n    tenantEmail: \"\",\r\n    visitDateTime: \"\"\r\n  });\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(\"\");\r\n\r\n  const user = JSON.parse(localStorage.getItem('user') || 'null');\r\n\r\n  // Pre-fill user data if available\r\n  React.useEffect(() => {\r\n    if (user) {\r\n      setForm(prev => ({\r\n        ...prev,\r\n        tenantName: user.name || \"\",\r\n        tenantEmail: user.email || \"\"\r\n      }));\r\n    }\r\n  }, [user]);\r\n\r\n  function handleChange(e) {\r\n    const { name, value } = e.target;\r\n    setForm(prev => ({ ...prev, [name]: value }));\r\n  }\r\n\r\n  async function handleSubmit(e) {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    setError(\"\");\r\n\r\n    try {\r\n      const visitData = {\r\n        tenantName: form.tenantName,\r\n        tenantEmail: form.tenantEmail,\r\n        visitDateTime: form.visitDateTime\r\n      };\r\n\r\n      await bookVisit(propertyId, visitData);\r\n      \r\n      if (onSuccess) onSuccess();\r\n      \r\n      // Reset form\r\n      setForm({\r\n        tenantName: user?.name || \"\",\r\n        tenantEmail: user?.email || \"\",\r\n        visitDateTime: \"\"\r\n      });\r\n    } catch (err) {\r\n      console.error(\"Error booking visit:\", err);\r\n      setError(err.message || \"Failed to book visit\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }\r\n\r\n  // Get minimum date (today)\r\n  const today = new Date().toISOString().slice(0, 16);\r\n\r\n  return (\r\n    <div>\r\n      {error && (\r\n        <div style={{ \r\n          background: '#fee2e2', \r\n          color: '#991b1b', \r\n          padding: '0.75rem', \r\n          borderRadius: '0.5rem', \r\n          marginBottom: '1.5rem',\r\n          border: '1px solid #fecaca'\r\n        }}>\r\n          {error}\r\n        </div>\r\n      )}\r\n\r\n      <form onSubmit={handleSubmit}>\r\n        <div className=\"form-group\">\r\n          <label className=\"form-label\">Your Name</label>\r\n          <input\r\n            type=\"text\"\r\n            name=\"tenantName\"\r\n            placeholder=\"Enter your full name\"\r\n            value={form.tenantName}\r\n            onChange={handleChange}\r\n            required\r\n          />\r\n        </div>\r\n\r\n        <div className=\"form-group\">\r\n          <label className=\"form-label\">Your Email</label>\r\n          <input\r\n            type=\"email\"\r\n            name=\"tenantEmail\"\r\n            placeholder=\"Enter your email address\"\r\n            value={form.tenantEmail}\r\n            onChange={handleChange}\r\n            required\r\n          />\r\n        </div>\r\n\r\n        <div className=\"form-group\">\r\n          <label className=\"form-label\">Preferred Visit Date & Time</label>\r\n          <input\r\n            type=\"datetime-local\"\r\n            name=\"visitDateTime\"\r\n            value={form.visitDateTime}\r\n            onChange={handleChange}\r\n            min={today}\r\n            required\r\n          />\r\n        </div>\r\n\r\n        {/* Notes removed to align with Visit model */}\r\n\r\n        <div style={{ display: 'flex', gap: '1rem', justifyContent: 'flex-end' }}>\r\n          <button \r\n            type=\"button\" \r\n            onClick={onSuccess}\r\n            className=\"btn-secondary\"\r\n          >\r\n            Cancel\r\n          </button>\r\n          <button type=\"submit\" disabled={loading}>\r\n            {loading ? (\r\n              <>\r\n                <span className=\"loading\"></span>\r\n                Booking Visit...\r\n              </>\r\n            ) : (\r\n              \"ðŸ“… Book Visit\"\r\n            )}\r\n          </button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}